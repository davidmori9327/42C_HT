<div class="files-page-bg">
  <div class="d-flex justify-content-between align-items-center mb-3">
  <ng-container *ngIf="files$ | async as files">
    <h5>{{ files.length }} files</h5>
  </ng-container>
  <button class="btn btn-primary" (click)="openUploadModal()">Upload file</button>
</div>
<table class="table">
  <thead>
    <tr>
      <th>File</th>
      <th>Name</th>
      <th>Description</th>
      <th>Valid</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngIf="files$ | async as files">
      <tr *ngFor="let file of getPagedFiles(files)">
        <td>
          <img src="assets/images/icon_fileuploaded.png" alt="file icon" style="width:20px;vertical-align:middle;margin-right:8px;" />
          {{ file.filename }}
        </td>
        <td>{{ file.name }}</td>
        <td>{{ file.description }}</td>
        <td>
          <span [ngClass]="file.isValid ? 'badge bg-success' : 'badge bg-danger'">
            {{ file.isValid ? 'Valid' : 'Not valid' }}
          </span>
        </td>
        <td>
          <button class="btn btn-link text-danger p-0" (click)="confirmDelete(file)" title="Delete">
            <i class="bi bi-trash" style="font-size:18px;"></i>
          </button>
        </td>
      </tr>
    </ng-container>
  </tbody>
    </table>
  </div>

<!-- Pagination section -->
<div class="pagination-bar-container">
  <nav aria-label="Files pagination" class="table-pagination">
    <ul class="pagination" *ngIf="files$ | async as files">
      <li class="page-item" [class.disabled]="page === 1">
        <button class="page-link" (click)="setPage(page - 1, files)" [disabled]="page === 1">&lt;</button>
      </li>
      <li class="page-item" *ngFor="let p of [].constructor(totalPages(files)); let i = index" [class.active]="page === i + 1">
        <button class="page-link" (click)="setPage(i + 1, files)">{{ i + 1 }}</button>
      </li>
      <li class="page-item" [class.disabled]="page === totalPages(files)">
        <button class="page-link" (click)="setPage(page + 1, files)" [disabled]="page === totalPages(files)">&gt;</button>
      </li>
    </ul>
  </nav>
</div>
<app-file-upload-modal *ngIf="showUploadModal()" (close)="closeUploadModal()"></app-file-upload-modal>

<app-confirm-delete-modal
  *ngIf="showDeleteModal() && fileToDelete"
  [filename]="fileToDelete.filename"
  (confirm)="onDeleteConfirm()"
  (cancel)="onDeleteCancel()"
></app-confirm-delete-modal>
