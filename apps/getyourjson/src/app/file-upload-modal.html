<div class="modal-backdrop"></div>
<div class="modal-dialog">
  <div class="modal-content">
    <form (ngSubmit)="onSubmit()" #uploadForm="ngForm">
      <div class="modal-header">
        <span class="modal-title">Select file</span>
        <button type="button" class="btn-close" (click)="close.emit()">Ã—</button>
      </div>
      
      <div class="modal-body">
        <div class="file-input-container">
          <input 
            type="file" 
            id="fileInput"
            class="file-input" 
            accept=".json"
            required 
            (change)="onFileSelected($event)" 
          />
          <div *ngIf="fileErrors.length > 0" class="error-message">
            <small *ngFor="let error of fileErrors">{{ error }}</small>
          </div>
        </div>
        
        <div class="form-input-container">
          <input 
            type="text" 
            id="nameInput"
            class="form-input" 
            placeholder="Name" 
            name="name" 
            [(ngModel)]="name" 
            (input)="validateName()"
            required 
            minlength="1" 
            maxlength="32" 
          />
          <div *ngIf="nameErrors.length > 0" class="error-message">
            <small *ngFor="let error of nameErrors">{{ error }}</small>
          </div>
        </div>
        
        <div class="form-input-container">
          <input 
            type="text" 
            id="descInput"
            class="form-input" 
            placeholder="Description" 
            name="description" 
            [(ngModel)]="description" 
            (input)="validateDescription()"
            maxlength="128" 
          />
          <div *ngIf="descriptionErrors.length > 0" class="error-message">
            <small *ngFor="let error of descriptionErrors">{{ error }}</small>
          </div>
        </div>
      </div>
      
      <div class="modal-footer">
        <button type="button" class="btn-cancel" (click)="close.emit()">Cancel</button>
        <button 
          type="submit" 
          class="btn btn-primary btn-upload " 
          [disabled]="!file || !name || nameErrors.length > 0 || descriptionErrors.length > 0 || fileErrors.length > 0 || isSubmitting"
        >
          {{ isSubmitting ? 'Uploading...' : 'Upload' }}
        </button>
      </div>
    </form>
  </div>
</div>